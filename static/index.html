<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/assets/lib/ldui/ldui.min.css"></head><body><div class="p-4"><textarea class="form-control mb-2" ld="edit" rows="20"></textarea><div class="btn btn-outline-dark" ld="commit">Commit</div></div><script type="text/javascript" src="/assets/lib/ldbase/base.js"></script><script type="text/javascript" src="/assets/lib/github/octokit-rest.min.js"></script><script type="text/javascript" src="/assets/lib/ldui/ldui.min.js"></script><script type="text/javascript" src="/js/secret.js"></script><script>// Generated by LiveScript 1.3.1
var octokit, lc;
octokit = new Octokit({
  auth: secret.token
});
ldc.register('main', [], function(){
  var lc, ldld, view;
  lc = {};
  ldld = new ldLoader({
    className: 'ldld full'
  });
  ldld.on();
  view = new ldView({
    root: document.body,
    action: {
      click: {
        commit: function(arg$){
          var node;
          node = arg$.node;
          return octokit.gists.update({
            gist_id: lc.id,
            files: {
              "index.html": {
                content: view.get('edit').value,
                filename: "index.html"
              }
            }
          }).then(function(){
            return console.log('done.');
          });
        }
      }
    }
  });
  return octokit.gists.list().then(function(it){
    it.data.map(function(it){
      return {
        url: it.url,
        id: it.id
      };
    });
    return octokit.gists.get({
      gist_id: lc.id = it.data[0].id
    });
  }).then(function(it){
    return octokit.gists.getRevision({
      gist_id: lc.id,
      sha: it.data.history[0].version
    });
  }).then(function(it){
    view.get('edit').value = it.data.files["index.html"].content;
    return ldld.off();
  });
});
ldc.app('main');
lc = {};
if (false) {
  octokit.gists.list().then(function(it){
    it.data.map(function(it){
      return {
        url: it.url,
        id: it.id
      };
    });
    return octokit.gists.get({
      gist_id: lc.id = it.data[0].id
    });
  }).then(function(it){
    return octokit.gists.getRevision({
      gist_id: lc.id,
      sha: it.data.history[0].version
    });
  }).then(function(it){
    return octokit.gists.update({
      gist_id: lc.id,
      files: {
        "index.html": {
          content: it.data.files['index.html'].content + '.',
          filename: "index.html"
        }
      }
    });
  }).then(function(it){
    console.log(it);
    return console.log('done.');
  });
}</script></body></html>